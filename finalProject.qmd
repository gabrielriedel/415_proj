---
title: "FinalProject"
format: html
editor: visual
---


Discuss your research question and context - Gabe
Find a data set (could be a data set from another class) - Gabe
Discuss the data and how it was collected - Gabe
Propose a Bayesian model - Oliver
Discuss choice of likelihood and assumptions of your model - Oliver
Discuss choice of prior, including some prior predictive tuning - Oliver
Fit the model to the data - Oliver
Perform and summarize posterior inference - Gabe
Perform and summarize posterior prediction - Gabe
Perform and summarize posterior predictive checking or model comparison - Gabe
Perform sensitivity analysis (e.g., how does the posterior change if the prior changes) - Gabe
Compare your results with a comparable frequentist analysis - Oliver
Report conclusions in the context of the research question - Gabe


```{r}
library(tidyverse)
```

```{r}
cp_data <- read_csv("data/cp_all_pitches.csv")
head(cp_data)
str(cp_data)
```

```{r}
clean_df <- cp_data |>
  select(GameUID, Inning, `Top/Bottom`, PAofInning, 
         TaggedPitchType, RelSpeed, InducedVertBreak, 
         HorzBreak, SpinRate, PitchCall) |>
  group_by(GameUID, Inning, `Top/Bottom`, PAofInning) |>
  mutate(prev_pitch = lag(TaggedPitchType),
         prev_speed = lag(RelSpeed),
         prev_vert = lag(InducedVertBreak),
         prev_horz = lag(HorzBreak),
         prev_spin = lag(SpinRate),
         whiff = if_else(PitchCall == "StrikeSwinging", 1, 0))
```

```{r}
View(clean_df)
```

Target Variable: whiff

Important: TaggedPitchType, prev_pitch, RelSpeed, prev_speed, InducedVertBreak, prev_vert

Less important but could be useful: HorzBreak, prev_horz, SpinRate, prev_spin, 
