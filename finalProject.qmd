---
title: "FinalProject"
format: html
editor: visual
---

```{r}
library(tidyverse)
```

```{r}
cp_data <- read_csv("data/cp_all_pitches.csv")
head(cp_data)
str(cp_data)
```

```{r}
clean_df <- cp_data |>
  select(GameUID, Inning, `Top/Bottom`, PAofInning, 
         TaggedPitchType, RelSpeed, InducedVertBreak, 
         HorzBreak, SpinRate, PitchCall) |>
  group_by(GameUID, Inning, `Top/Bottom`, PAofInning) |>
  mutate(prev_pitch = lag(TaggedPitchType),
         prev_speed = lag(RelSpeed),
         prev_vert = lag(InducedVertBreak),
         prev_horz = lag(HorzBreak),
         prev_spin = lag(SpinRate),
         whiff = if_else(PitchCall == "StrikeSwinging", 1, 0))
```

```{r}
View(clean_df)
```
